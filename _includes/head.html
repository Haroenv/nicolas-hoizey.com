<!-- nomicrotypo -->
<head{% if page.title == "Accueil" %} itemscope itemtype="http://schema.org/WebSite"{% endif %}>
  {% comment %}
  charset and viewport first: http://www.nateberkopec.com/2015/10/21/hacking-head-tags-for-speed-and-profit.html
  {% endcomment %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script>
  {% asset early-js %}
  </script>

  <style>
  {% asset critical-styles %}
  </style>

  <link rel="preload" href="{% asset_path non-critical-styles %}" as="style" onload="this.rel='stylesheet'" />
  <noscript>
    <link rel="stylesheet" href="{% asset_path non-critical-styles %}" />
  </noscript>
  <script>
    {% asset vendors/loadCSS-1.2.0 %}
    {% asset vendors/cssrelpreload-1.2.0 %}
  </script>

  {% comment %}
  98% browsers visiting this site support responsive images natively
  {% javascript vendors/picturefill-3.0.2 async defer %}
  {% endcomment %}

  {% comment %} opengraph and Twitter {% endcomment %}
  <meta property="og:site_name" content="Nicolas Hoizey" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:creator" content="@nhoizey" />
  <meta name="twitter:site" content="@nhoizey" />

  {% comment %} https://dev.twitter.com/web/overview/widgets-webpage-properties#csp {% endcomment %}
  <meta name="twitter:widgets:csp" content="on" />

  {% if page.title == "Accueil" %}
    {% capture title %}Nicolas Hoizey{% endcapture %}
    <title itemprop="name">Nicolas Hoizey</title>
    <link rel="canonical" href="{{ site.url }}" itemprop="url" />
    <meta name="description" content="{{ site.description }}" />
    <meta property="og:url" content="{{ site.url }}" />
    <meta property="og:type" content="website" />
  {% else %}
    {% if page.type == "year" %}
      {% capture title %}Billets de {{ page.date | date: "%Y" }}{% endcapture %}
      <meta name="description" content="Billets de Nicolas Hoizey publiés en {{ page.date | date: "%Y" }}" />
      <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
      <meta property="og:type" content="website" />
    {% else %}
      {% if page.type == "month" %}
        {% capture title %}Billets de {% include mois.html page=page %} {{ page.date | date: "%Y" }}{% endcapture %}
        <meta name="description" content="Billets de Nicolas Hoizey publiés en {% include mois.html page=page %} {{ page.date | date: "%Y" }}" />
        <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
        <meta property="og:type" content="website" />
      {% else %}
        {% if page.tag %}
          {% capture title %}{{ page.tag }}{% endcapture %}
          <meta name="description" content="Billets de Nicolas Hoizey auxquels est associé le tag « {{ page.tag }} »" />
          <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
          <meta property="og:type" content="website" />
        {% else %}
          {% capture title %}{{ page.title }}{% endcapture %}
          <meta name="description" content="{{ page.excerpt | strip_html | truncatewords: 150 | truncate: 290 | strip_newlines | escape_once }}" />
          <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
          <meta property="og:type" content="article" />
          <meta property="article:author" content="https://www.facebook.com/nhoizey" />
          {% for tag in page.tags %}
            <meta property="article:tag" content="{{ tag }}" />
          {% endfor %}
        {% endif %}
      {% endif %}
    {% endif %}
    <title>{{ title }}</title>
  {% endif %}
  <meta property="og:title" content="{{ title }}" />

  {% comment %} Get the first image in the page {% endcomment %}
  {% capture first_image %}{% include first-image-src.html page=page %}{% endcapture %}
  {% if first_image == "" %}
    {% assign first_image = site.url | append:'/assets/photo-de-nicolas-hoizey-400px.jpg' %}
  {% endif %}
  {% comment %}
  https://blog.bufferapp.com/ideal-image-sizes-social-media-posts

  https://res.cloudinary.com/nho/image/fetch/e_blur:2000,c_crop,ar_1200:628,b_rgb:ffffff/e_grayscale/w_1200/l_fetch:aHR0cHM6Ly9uaWNvbGFzLWhvaXpleS5jb20vYXNzZXRzL2xvZ29zL2Nsb3VkaW5hcnkucG5n,h_1.0,w_1.0,fl_relative,c_limit/w_1200,c_fit,l_text:georgia_80:Cloudinary%20fait%20la%20promotion%20de%20mon%20plugin%20Jekyll,g_north_west,x_31,y_32,co_white,o_90/w_1200,c_fit,l_text:georgia_80:Cloudinary%20fait%20la%20promotion%20de%20mon%20plugin%20Jekyll,g_north_west,x_30,y_30,co_black/w_1200,c_fit,l_text:courier_30:nicolas-hoizey.com,g_south_east,x_30,y_30,co_black/https://nicolas-hoizey.com/assets/logos/cloudinary.png
  {% endcomment %}

  <meta property="og:image" content="https://res.cloudinary.com/nho/image/fetch/e_blur:2000,c_crop,ar_1200:628,b_rgb:ffffff/e_grayscale/w_1200/l_fetch:{{ first_image | base64_encode }},h_1.0,w_1.0,fl_relative,c_limit/w_1200,c_fit,l_text:georgia_80:{{ title | url_encode }},g_north_west,x_31,y_32,co_white,o_90/w_1200,c_fit,l_text:georgia_80:{{ title | url_encode }},g_north_west,x_30,y_30,co_black/w_1200,c_fit,l_text:courier_30:nicolas-hoizey.com,g_south_east,x_30,y_30,co_black/{{ first_image }}" />

  <link rel="alternate" type="application/rss+xml" title="Abonnez-vous au flux" href="/atom.xml" />
  <link rel="icon" type="image/jpeg" href="/favicon.jpg" />

  {% comment %} webmentions with webmention.io {% endcomment %}
  <link rel="pingback" href="https://webmention.io/nicolas-hoizey.com/xmlrpc" />
  <link rel="webmention" href="https://webmention.io/nicolas-hoizey.com/webmention" />

  {% comment %} iOS features {% endcomment %}
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon" href="/favicon.jpg" />
  <meta name="apple-mobile-web-app-title" content="NH.com" />

  {% comment %} Theme color : https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android {% endcomment %}
  <meta name="theme-color" content="#43246a">

  {% comment %} web app manifest {% endcomment %}
  <link rel="manifest" href="/manifest.webmanifest" />
</head>
<!-- endnomicrotypo -->
